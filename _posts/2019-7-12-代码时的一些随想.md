---
layout: post
title: 代码时的一些随想
tags: [基础]
excerpt_separator: <!--more-->
---

如果面试都是这样开放设计的题目会发生什么

一些突发奇想

<!--more-->

### 上下文

任何概念与定义都必须基于一个特定的上下文（环境）否则会失去意义，也就是语境与限定。上下文概念是一个使用范围非常广泛的概念，可以出现在除编程以外的很多领域，例如在辩论与讨论中双方可能交锋的不是论点而是上下文，目的是将自己的上下文另对方信服或根据优势。在编程领域实际上有很多实例比如Spring ApplicationContext，多线程上下文切换、C# UI线程SynchronizationContext等等。

当然上述只是概念，如果谈论我对上下文的理解，狭义上来讲是某个概念所必须的数据类，广义上来讲是一种界定。狭义上的理解比较好解释，广义上来讲可能不是以context的形式出现，可以是单体应用的一个文件夹、一个项目，或者是一个微服务。

说起上下文，每当我需要解决一个问题，我的编程习惯是新建个名称为 DefaultContext 的类，当然这个名称会根据以后需要更改，但是有这样的一个类会让我感到安心，因为我的一些内部运转可以交给这个类解决，顺理成章。所以有新建类而不知道如何起名或不知道如何给自己代码安排职责时，或许可以考虑这一点。

### 位操作

其实位操作没有想象中的枯燥，我在这里试举几例。① 使用位移操作（左移/右移）模拟队列操作。如果你的数据可以用位替代或者可以通过位转换这个操作确实可以帮助你省去一些麻烦，不妨试试 ② 布隆过滤器。虽然有一定误判率但是因为速度快可以做前置检查，也有一些改进版的布隆过滤器改进其弱点，一些第三方库亦有支持。

Ps：一些问题使用位运算会有奇效，可以试试（搜索Matrix67的《位运算简介及实用技巧》或位运算应用说不定会有惊喜）。不过还是要明确的是，位操作等相关的操作时我一般持有保守态度，因为很多支持这种编程风格的程序员有两个理由 ①简洁 ②高效。但是个人认为团队编程需要的是共识，共识之一包括编程风格，如果这种编程风格带来部分队员的理解难度，则需要慎重考虑，同时高效的问题在没有发生量变情况下也难以衡量，如果仅仅是几个操作就谈及效率，有点过于苛刻了。

### 分层架构

分层架构应该是我用的最多的一种架构，虽然用的多但也不见得对它认知的有多深刻，现在微服务兴起刮起了抛弃这种上古遗物的风潮，有很多程序员似乎也要被这股风刮飞了去，谈及架构一定提及那些服务、治理、路由等等。但我一直相信大道至简，看似简单的东西一定有其深刻的内涵，这里我也谈一下自己对分层架构的看法

① 如果你的业务场景可以总体归纳为一类**有序**的序列，则可能适合使用分层架构。这里的意思如果从另一个角度理解就是业务按照流程划分，同时层级保持单向依赖，尽可能不跨层调用。分层架构也有规范的意思，因为编写代码时最常见的就是循环依赖，进行分层保持单向也潜意识避免这种错误。分层架构的这几点也是它使用广泛的原因之一，因为人较为容易理解有序的序列，同时也习惯将一个复杂事物模块化并按照一定顺序组合，因此分层架构正好符合这些特点。

② 如果将分层架构图旋转180度的话，我认为一个良好的分层架构图很像一个继承关系良好的类图。这对我有一些启发。对于某些业务场景难以进行划分层级的时候，我会去参考一些相似业务的开源项目代码的类图（UML图），说不定有意外收获。有时去看一些知名项目的分层架构图，也能从中间接学习到一些关于继承、组合、依赖相关的知识。

### 操作系统与分布式



### 阅读源码

似乎很少有人提到bookmark（书签）工具，对我而言她有时可以代替注释/断点帮助我理清思路。在Visual Studio 中书签默认就放在工具栏的一侧，可惜很多人（包括以前的我）对她视而不见。真心推荐这个工具。Ps：书签工具在IDEA中倒是很不起眼，而且不太好用。